"use strict";!function(t){t.fn.drilldownSelect=function(e){var n={left:0,height:240,data:[],keyName:"id",valueName:"name",listName:"list",appendValue:!0,textBack:"Back...",onSelected:function(e){alert(t(e.target).data("id"))}},a=(e=t.extend(n,e),!1);return this.each((function(e){var i=t(this),o=i.find("span.text");o.html(o.attr("placeholder"));var s=i.parent();!function e(i,o,s,r){var l=null!=(s+="")&&""!=s?s.split(","):[],c=n.data;if(l.length)for(var u=0;u<l.length;u++)for(var d=l[u],f=0;f<c.length;f++)if(c[f].id==d){c=c[f][n.listName];break}if(!c)return n.onSelected(o),i.dropdown("toggle"),a=!1,!1;a&&(i.dropdown("toggle"),a=!1);i.parent().find("ul.dropdown-menu").remove();var p=t('<ul class="dropdown-menu" style="'+(n.height?"height: "+n.height+"px; ":"")+'overflow: auto;"></ul>'),h=null,m=null,g=l.slice();l.length&&(g.pop(),(m=t('<li><a href="#" data-path="'+g.join(",")+'"><b>'+n.textBack+"</b></a></li>")).on("click",(function(n){var a=i.find("span.text");return a.html(a.attr("placeholder")),e(i,n,t(n.target).closest("[data-path]").data("path"),!0),!1})),p.append(m));for(u=0;u<c.length;u++){h=c[u],(g=l.slice()).push(h[n.keyName]);var v=null!=h[n.listName]&&h[n.listName]&&h[n.listName].length?"hasChild":"";(m=t('<li class="'+v+'"><a href="#" data-path="'+g.join(",")+'" data-id="'+h[n.keyName]+'">'+h[n.valueName]+"</a></li>")).on("click",(function(a){a.preventDefault();var o=t(a.target),s=i.find("span.text");s.html()==s.attr("placeholder")&&s.html("");var r=n.appendValue?(s.html()?s.html()+" - ":"")+o.html():o.html();return s.html(r),e(i,a,o.closest("[data-path]").data("path"),!0),!1})),p.append(m)}if(p.insertAfter(i),r)return i.dropdown("toggle"),a=!0,!1}(i,null,"",!1),s.on("show.bs.dropdown",(function(e){var i=t(e.relatedTarget),o=t(e.target).find(".dropdown-menu");o.width(i.outerWidth()-2),o.css("left",n.left),a=!0}))}))}}(jQuery);var EasyAutocomplete=function(t){return t.main=function(e,n){var a,i=new t.Constants,o=new t.Configuration(n),s=new t.Logger,r=new t.Template(n.template),l=new t.ListBuilderService(o,t.proccess),c=o.equals,u=e,d="",f=[],p=-1;function h(){var t;function e(t,e){return o.get("highlightPhrase")&&""!==e?function(t,e){var n=(a=e,a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));var a;return(t+"").replace(new RegExp("("+n+")","gi"),"<b>$1</b>")}(t,e):t}u.parent().hasClass(i.getValue("WRAPPER_CSS_CLASS"))&&(u.next("."+i.getValue("CONTAINER_CLASS")).remove(),u.unwrap()),function(){var t=$("<div>"),e=i.getValue("WRAPPER_CSS_CLASS");o.get("theme")&&""!==o.get("theme")&&(e+=" eac-"+o.get("theme"));o.get("cssClasses")&&""!==o.get("cssClasses")&&(e+=" "+o.get("cssClasses"));""!==r.getTemplateClass()&&(e+=" "+r.getTemplateClass());t.addClass(e),u.wrap(t),!0===o.get("adjustWidth")&&(n=u.outerWidth(),u.parent().css("width",n));var n}(),(t=$("<div>").addClass(i.getValue("CONTAINER_CLASS"))).attr("id",m()).prepend($("<ul>")),t.on("show.eac",(function(){if(u.is(":focus")){switch(o.get("list").showAnimation.type){case"slide":var e=o.get("list").showAnimation.time,n=o.get("list").showAnimation.callback;t.find("ul").slideDown(e,n);break;case"fade":e=o.get("list").showAnimation.time,n=o.get("list").showAnimation.callback,t.find("ul").fadeIn(e);break;default:t.find("ul").show()}o.get("list").onShowListEvent()}})).on("hide.eac",(function(){switch(o.get("list").hideAnimation.type){case"slide":var e=o.get("list").hideAnimation.time,n=o.get("list").hideAnimation.callback;t.find("ul").slideUp(e,n);break;case"fade":e=o.get("list").hideAnimation.time,n=o.get("list").hideAnimation.callback,t.find("ul").fadeOut(e,n);break;default:t.find("ul").hide()}o.get("list").onHideListEvent()})).on("selectElement.eac",(function(){t.find("ul li").removeClass("selected"),t.find("ul li").eq(p).addClass("selected"),o.get("list").onSelectItemEvent()})).on("loadElements.eac",(function(n,a,i){var s="",l=t.find("ul");l.empty().detach(),f=[];for(var c=0,d=0,h=a.length;d<h;d+=1){var m=a[d].data;if(0!==m.length){void 0!==a[d].header&&a[d].header.length>0&&l.append("<div class='eac-category' >"+a[d].header+"</div>");for(var g=0,v=m.length;g<v&&c<a[d].maxListSize;g+=1)s=$("<li><div class='eac-item'></div></li>"),function(){var t=g,n=c,l=a[d].getValue(m[t]);s.find(" > div").on("click",(function(){u.val(l).trigger("change"),p=n,y(n),o.get("list").onClickEvent(),o.get("list").onChooseEvent()})).mouseover((function(){p=n,y(n),o.get("list").onMouseOverEvent()})).mouseout((function(){o.get("list").onMouseOutEvent()})).html(r.build(e(l,i),m[t]))}(),l.append(s),f.push(m[g]),c+=1}}t.append(l),o.get("list").onLoadEvent()})),u.after(t),d=$("#"+m()),o.get("placeholder")&&u.attr("placeholder",o.get("placeholder"))}function m(){var t=u.attr("id");return t=i.getValue("CONTAINER_ID")+t}function g(){d.trigger("show.eac")}function v(){d.trigger("hide.eac")}function y(t){d.trigger("selectElement.eac",t)}function b(t,e){d.trigger("loadElements.eac",[t,e])}t.consts=i,this.getConstants=function(){return i},this.getConfiguration=function(){return o},this.getContainer=function(){return d},this.getSelectedItemIndex=function(){return p},this.getItems=function(){return f},this.getItemData=function(t){return f.length<t||void 0===f[t]?-1:f[t]},this.getSelectedItemData=function(){return this.getItemData(p)},this.build=function(){h()},this.init=function(){!function(){if(0===u.length)return void s.error("Input field doesn't exist.");if(!o.checkDataUrlProperties())return void s.error("One of options variables 'data' or 'url' must be defined.");if(!o.checkRequiredProperties())return void s.error("Will not work without mentioned properties.");h(),c("autocompleteOff",!0)&&u.attr("autocomplete","off"),u.focusout((function(){var t,e=u.val();o.get("list").match.caseSensitive||(e=e.toLowerCase());for(var n=0,a=f.length;n<a;n+=1)if(t=o.get("getValue")(f[n]),o.get("list").match.caseSensitive||(t=t.toLowerCase()),t===e)return void y(p=n)})),u.off("keyup").keyup((function(t){switch(t.keyCode){case 27:v(),u.trigger("blur");break;case 38:t.preventDefault(),f.length>0&&p>0&&(p-=1,u.val(o.get("getValue")(f[p])),y(p));break;case 40:t.preventDefault(),f.length>0&&p<f.length-1&&(p+=1,u.val(o.get("getValue")(f[p])),y(p));break;default:if(t.keyCode>40||8===t.keyCode||0===t.keyCode){var e=u.val();!0!==o.get("list").hideOnEmptyPhrase||8!==t.keyCode||""!==e?o.get("requestDelay")>0?(void 0!==a&&clearTimeout(a),a=setTimeout((function(){n(e)}),o.get("requestDelay"))):n(e):v()}}function n(t){if(!(t.length<o.get("minCharNumber"))){if("list-required"!==o.get("data")){var e=o.get("data"),n=l.init(e);n=l.updateCategories(n,e),b(n=l.processData(n,t),t),u.parent().find("li").length>0?g():v()}var a=function(){var t={},e=o.get("ajaxSettings")||{};for(var n in e)t[n]=e[n];return t}();void 0!==a.url&&""!==a.url||(a.url=o.get("url")),void 0!==a.dataType&&""!==a.dataType||(a.dataType=o.get("dataType")),void 0!==a.url&&"list-required"!==a.url&&(a.url=a.url(t),a.data=o.get("preparePostData")(a.data,t),$.ajax(a).done((function(e){var n=l.init(e);n=l.updateCategories(n,e),n=l.convertXml(n),function(t,e){return!1===o.get("matchResponseProperty")||("string"==typeof o.get("matchResponseProperty")?e[o.get("matchResponseProperty")]===t:"function"!=typeof o.get("matchResponseProperty")||o.get("matchResponseProperty")(e)===t)}(t,e)&&b(n=l.processData(n,t),t),l.checkIfDataExists(n)&&u.parent().find("li").length>0?g():v(),o.get("ajaxCallback")()})).fail((function(){s.warning("Fail to load response data")})).always((function(){})))}}})),u.on("keydown",(function(t){if(38===(t=t||window.event).keyCode)return suppressKeypress=!0,!1})).keydown((function(t){13===t.keyCode&&p>-1&&(u.val(o.get("getValue")(f[p])),o.get("list").onKeyEnterEvent(),o.get("list").onChooseEvent(),p=-1,v(),t.preventDefault())})),u.off("keypress"),u.focus((function(){""!==u.val()&&f.length>0&&(p=-1,g())})),u.blur((function(){setTimeout((function(){p=-1,v()}),250)}))}()}},t.eacHandles=[],t.getHandle=function(e){return t.eacHandles[e]},t.inputHasId=function(t){return void 0!==$(t).attr("id")&&$(t).attr("id").length>0},t.assignRandomId=function(e){var n="";do{n="eac-"+Math.floor(1e4*Math.random())}while(0!==$("#"+n).length);elementId=t.consts.getValue("CONTAINER_ID")+n,$(e).attr("id",n)},t.setHandle=function(e,n){t.eacHandles[n]=e},t}((EasyAutocomplete=function(t){return t.Template=function(t){var e={basic:{type:"basic",method:function(t){return t},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(t){return t+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(t){return t},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(t){return t},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(t){return t},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}};this.getTemplateClass=function(t){var n,a=function(){return""};return t&&t.type&&t.type&&e[t.type]?(n=e[t.type].cssClass,function(){return n}):a}(t),this.build=function(t){return t&&t.type&&t.type&&e[t.type]?(i=(n=t).fields,"description"===n.type?(a=e.description.method,"string"==typeof i.description?a=function(t,e){return t+" - <span>"+e[i.description]+"</span>"}:"function"==typeof i.description&&(a=function(t,e){return t+" - <span>"+i.description(e)+"</span>"}),a):"iconRight"===n.type?("string"==typeof i.iconSrc?a=function(t,e){return t+"<img class='eac-icon' src='"+e[i.iconSrc]+"' />"}:"function"==typeof i.iconSrc&&(a=function(t,e){return t+"<img class='eac-icon' src='"+i.iconSrc(e)+"' />"}),a):"iconLeft"===n.type?("string"==typeof i.iconSrc?a=function(t,e){return"<img class='eac-icon' src='"+e[i.iconSrc]+"' />"+t}:"function"==typeof i.iconSrc&&(a=function(t,e){return"<img class='eac-icon' src='"+i.iconSrc(e)+"' />"+t}),a):"links"===n.type?("string"==typeof i.link?a=function(t,e){return"<a href='"+e[i.link]+"' >"+t+"</a>"}:"function"==typeof i.link&&(a=function(t,e){return"<a href='"+i.link(e)+"' >"+t+"</a>"}),a):"custom"===n.type?n.method:e.basic.method):e.basic.method;var n,a,i}(t)},t}((EasyAutocomplete=function(t){return t.proccess=function(e,n,a){t.proccess.match=o;var i=n.data;return i=function(t){e.get("list").sort.enabled&&t.sort(e.get("list").sort.method);return t}(i=function(t){void 0!==n.maxNumberOfElements&&t.length>n.maxNumberOfElements&&(t=t.slice(0,n.maxNumberOfElements));return t}(i=function(t,n){var a=[];if(e.get("list").match.enabled)for(var i=0,s=t.length;i<s;i+=1)o(e.get("getValue")(t[i]),n)&&a.push(t[i]);else a=t;return a}(i,a)));function o(t,n){return e.get("list").match.caseSensitive||("string"==typeof t&&(t=t.toLowerCase()),n=n.toLowerCase()),e.get("list").match.method(t,n)}},t}((EasyAutocomplete=function(t){return t.ListBuilderService=function(t,e){function n(e,n){var a={};if(a="XML"===t.get("dataType").toUpperCase()?function(){var a,i={};void 0!==e.xmlElementName&&(i.xmlElementName=e.xmlElementName);void 0!==e.listLocation?a=e.listLocation:void 0!==t.get("listLocation")&&(a=t.get("listLocation"));void 0!==a?"string"==typeof a?i.data=$(n).find(a):"function"==typeof a&&(i.data=a(n)):i.data=n;return i}():function(){var t={};void 0!==e.listLocation?"string"==typeof e.listLocation?t.data=n[e.listLocation]:"function"==typeof e.listLocation&&(t.data=e.listLocation(n)):t.data=n;return t}(),void 0!==e.header&&(a.header=e.header),void 0!==e.maxNumberOfElements&&(a.maxNumberOfElements=e.maxNumberOfElements),void 0!==t.get("list").maxNumberOfElements&&(a.maxListSize=t.get("list").maxNumberOfElements),void 0!==e.getValue)if("string"==typeof e.getValue){var i=e.getValue;a.getValue=function(t){return t[i]}}else"function"==typeof e.getValue&&(a.getValue=e.getValue);else a.getValue=t.get("getValue");return a}function a(e){var n=[];return void 0===e.xmlElementName&&(e.xmlElementName=t.get("xmlElementName")),$(e.data).find(e.xmlElementName).each((function(){n.push(this)})),n}this.init=function(e){var n=[],a={};return a.data=t.get("listLocation")(e),a.getValue=t.get("getValue"),a.maxListSize=t.get("list").maxNumberOfElements,n.push(a),n},this.updateCategories=function(e,a){if(t.get("categoriesAssigned")){e=[];for(var i=0;i<t.get("categories").length;i+=1){var o=n(t.get("categories")[i],a);e.push(o)}}return e},this.convertXml=function(e){if("XML"===t.get("dataType").toUpperCase())for(var n=0;n<e.length;n+=1)e[n].data=a(e[n]);return e},this.processData=function(n,a){for(var i=0,o=n.length;i<o;i+=1)n[i].data=e(t,n[i],a);return n},this.checkIfDataExists=function(t){for(var e=0,n=t.length;e<n;e+=1)if(void 0!==t[e].data&&t[e].data instanceof Array&&t[e].data.length>0)return!0;return!1}},t}((EasyAutocomplete=function(t){return t.Constants=function(){var t={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(e){return t[e]}},t}((EasyAutocomplete=function(t){return t.Logger=function(){this.error=function(t){console.log("ERROR: "+t)},this.warning=function(t){console.log("WARNING: "+t)}},t}((EasyAutocomplete=function(t){return t.Configuration=function(t){var e={data:"list-required",url:"list-required",dataType:"json",listLocation:function(t){return t},xmlElementName:"",getValue:function(t){return t},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(t,n){return(t=e.getValue(t))<(n=e.getValue(n))?-1:t>n?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(t,e){return t.search(e)>-1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(t,e){return t},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},n=["ajaxSettings","template"];function a(t,a){!function e(a,i){for(var o in i)void 0===a[o]&&t.log("Property '"+o+"' does not exist in EasyAutocomplete options API."),"object"==typeof a[o]&&-1===$.inArray(o,n)&&e(a[o],i[o])}(e,a)}this.get=function(t){return e[t]},this.equals=function(t,n){return!(!function(t){return void 0!==e[t]&&null!==e[t]}(t)||e[t]!==n)},this.checkDataUrlProperties=function(){return!("list-required"===e.url&&"list-required"===e.data)},this.checkRequiredProperties=function(){for(var t in e)if("required"===e[t])return logger.error("Option "+t+" must be defined"),!1;return!0},this.printPropertiesThatDoesntExist=function(t,e){a(t,e)},function(){"xml"===t.dataType&&(t.getValue||(t.getValue=function(t){return $(t).text()}),t.list||(t.list={}),t.list.sort||(t.list.sort={}),t.list.sort.method=function(e,n){return(e=t.getValue(e))<(n=t.getValue(n))?-1:e>n?1:0},t.list.match||(t.list.match={}),t.list.match.method=function(t,e){return t.search(e)>-1});if(void 0!==t.categories&&t.categories instanceof Array){for(var n=[],a=0,i=t.categories.length;a<i;a+=1){var o=t.categories[a];for(var s in e.categories[0])void 0===o[s]&&(o[s]=e.categories[0][s]);n.push(o)}t.categories=n}}(),!0===(e=function t(e,n){var a=e||{};for(var i in e)void 0!==n[i]&&null!==n[i]&&("object"!=typeof n[i]||n[i]instanceof Array?a[i]=n[i]:t(e[i],n[i]));return void 0!==n.data&&null!==n.data&&"object"==typeof n.data&&(a.data=n.data),a}(e,t)).loggerEnabled&&a(console,t),void 0!==t.ajaxSettings&&"object"==typeof t.ajaxSettings?e.ajaxSettings=t.ajaxSettings:e.ajaxSettings={},function(){if("list-required"!==e.url&&"function"!=typeof e.url){var n=e.url;e.url=function(){return n}}if(void 0!==e.ajaxSettings.url&&"function"!=typeof e.ajaxSettings.url){n=e.ajaxSettings.url;e.ajaxSettings.url=function(){return n}}if("string"==typeof e.listLocation){var a=e.listLocation;"XML"===e.dataType.toUpperCase()?e.listLocation=function(t){return $(t).find(a)}:e.listLocation=function(t){return t[a]}}if("string"==typeof e.getValue){var i=e.getValue;e.getValue=function(t){return t[i]}}void 0!==t.categories&&(e.categoriesAssigned=!0)}()},t}(EasyAutocomplete||{}))||{}))||{}))||{}))||{}))||{}))||{});!function(t){t.fn.easyAutocomplete=function(e){return this.each((function(){var n=t(this),a=new EasyAutocomplete.main(n,e);EasyAutocomplete.inputHasId(n)||EasyAutocomplete.assignRandomId(n),a.init(),EasyAutocomplete.setHandle(a,n.attr("id"))}))},t.fn.getSelectedItemIndex=function(){var e=t(this).attr("id");return void 0!==e?EasyAutocomplete.getHandle(e).getSelectedItemIndex():-1},t.fn.getItems=function(){var e=t(this).attr("id");return void 0!==e?EasyAutocomplete.getHandle(e).getItems():-1},t.fn.getItemData=function(e){var n=t(this).attr("id");return void 0!==n&&e>-1?EasyAutocomplete.getHandle(n).getItemData(e):-1},t.fn.getSelectedItemData=function(){var e=t(this).attr("id");return void 0!==e?EasyAutocomplete.getHandle(e).getSelectedItemData():-1}}(jQuery);var Raovat={postsArray:[],user_id:0,init:function(){myvne_users.setCallback("profile",(function(t){Raovat.user_id=parseInt(t.user_id),Raovat.user_id=parseInt(t.user_id);void 0!==t.user_id&&parseInt(t.user_id)>0&&$.ajax({url:base_url+"/user/login",type:"POST",dataType:"json",data:{user_id:t.user_id,user_session:t.user_session},success:function(t){Raovat.cookies("Raovat_logged_in_"+location.hostname,1,{expires:7,domain:".vnexpress.net",path:"/"}),t.profile&&t.auth&&Raovat.user.parserLogin(t.profile)}})})),myvne_users.run({taskbar:!1}),myvne_users.getprofile(),Raovat.user.init(),Raovat.userPosts.dangTin(),Raovat.cookies("login_call_back",0,{expires:7,domain:".vnexpress.net",path:"/"}),$.ajax({type:"GET",url:"home/api/tokenCsrf.html",dataType:"json",success:function(t){$("input[name=csrf_token]").val(t.token)}})},cookies:function(t,e,n){if(arguments.length>1&&"[object Object]"!==String(e)){if(n="object"==typeof n?n:{},null==e&&(n.expires=-1),"number"==typeof n.expires){var a=864e5*parseInt(n.expires),i=n.expires=new Date,o=i.getTime();n.expires.setTime(o+a)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var s,r=(n=e||{}).raw?function(t){return t}:decodeURIComponent;return(s=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?r(s[1]):null},user:{init:function(){Raovat.user.login(),Raovat.user.logout(),Raovat.user.changePassword()},myvne_login:function(t){var e=Raovat.cookies("login_call_back");e++,($.isEmptyObject(myvne_users.profile)||void 0===myvne_users.profile.user_id)&&(myvne_users._html_popup_login(),Raovat.cookies("login_call_back",e,{expires:7,domain:".vnexpress.net",path:"/"})),1==e&&myvne_users.setCallback("login",(function(t){$.ajax({url:base_url+"/user/login",type:"POST",dataType:"json",data:{user_id:t.user_id,user_session:t.user_session},success:function(t){Raovat.cookies("login_call_back",0,{expires:7,domain:".vnexpress.net",path:"/"}),Raovat.cookies("Raovat_logged_in_"+location.hostname,1,{expires:7,domain:".vnexpress.net",path:"/"}),t.profile&&t.auth&&Raovat.user.parserLogin(t.profile)}})}))},login:function(t){$("body").on("click",".myvne_login",(function(){Raovat.user.myvne_login(t)}))},logout:function(){$(".myvne_form_log").on("click","#myvne_logout,.myvne_logout",(function(){$.ajax({url:base_url+"/user/logout",type:"GET",success:function(t,e,n){Raovat.cookies("member_area_Raovat","",{expires:7,domain:".vnexpress.net",path:"/"}),Raovat.cookies("raovat_logged_in_"+location.hostname,null,{expires:7,domain:".vnexpress.net",path:"/"}),Raovat.cookies("myvne_user_id",null,{expires:7,domain:".vnexpress.net",path:"/"}),Raovat.cookies("myvne_user_id",null,{expires:7,domain:"my.vnexpress.net",path:"/"})}}),myvne_users.logout()}))},changePassword:function(){$(".myvne_change_password").on("click",(function(){myvne_users._html_popup_change_password()}))},profile:function(){var t=$("#form_profile");t.validate({ignore:[],rules:{fullname:{required:!0,maxlength:30},phone:{required:!0,number:!0,minlength:10,maxlength:15},email:{required:!0,email:!0,maxlength:100},address:{maxlength:100}},messages:{fullname:{required:"Bạn chưa nhập vào họ tên.",maxlength:"Bạn nhập vào họ tên quá dài (tối đa 30 ký tự)"},phone:{required:"Bạn chưa nhập vào số điện thoại.",number:"Số điên thoại phải là dạng số.",minlength:"Số điện thoại chưa đúng.",maxlength:"Số điện thoại chưa đúng"},email:{required:"Bạn chưa nhập vào địa chỉ email.",email:"Định dạng email chưa đúng.",maxlength:"Bạn nhập email quá dài (tối đa 100 ký tự)"},address:{maxlength:"Bạn nhập địa chỉ quá dài (tối đa 100 ký tự)"}},submitHandler:function(e){var n=t.find("#btnSubmit_profile");if($(".fullname_error").hide(),$("#fullname").val().indexOf(" ")<=0)return $(".fullname_error").html("Họ và tên không hợp lệ. Vui lòng xác nhận lại").show(),$("#fullname").focus(),!1;n.text("Xin chờ..."),n.attr("disabled","disabled"),$.ajax({url:base_url+"/user/profile",type:"POST",dataType:"json",data:t.serialize(),success:function(t,e,n){$(".err").remove(),Raovat.payment.lightbox('<div class="width_common dathangthanhcong_lightbox"><div class="width_common round_lighbox"><h4><i class="fa fa-check-circle" style="font-size: 20px;color: red;"></i> Cập nhật thông tin thành công</h4></div></div>',500,510),setTimeout((function(){location.reload()}),1200)},error:function(t,e,a){n.removeAttr("disabled");var i=$.parseJSON(t.responseText);$.each(i.message,(function(t,e){$("."+t+"_error").addClass("err").text(e)}))}})},showErrors:function(e){if($.isEmptyObject(e))t.find(".txt_error").text("");else{var n=1;$.each(e,(function(e,a){a="Please enter a valid email address."==a?"Định dạng email chưa đúng":a,t.find("."+e+"_error").text(a),1==n&&$("#"+e).focus(),n++}))}},onfocusout:!1})},parserLogin:function(t){return 1==device_env?($("#myvne_profile1").html(t),$("#myvne_profile").html("")):($("#myvne_profile").html(""),$("#myvne_profile1").html(t),$(".myvne_user").bind("click",(function(){$(".myvne_user_status").toggle()})),$(".myvne_form_log").addClass("logged")),!0}},userPosts:{init:function(){$(".nav-link").on("click",(function(t){var e=$(this).data("type");Raovat.userPosts.loadListPost(e)}))},loadListPost:function(t){$(".load").show(),$.ajax({type:"post",url:"/user/ajax/listPost?page=1&type="+t,success:function(e){$(".load").hide(),"undefined"!=e.html?($("#pills-tabContent").html(e.html),$("#pills-tab #utab-"+t+" .number-count").html(e.total)):$("#pills-tabContent").html('<div class="tab-pane fade show active" role="tabpanel"><div class="management-post-expired table-responsive-lg"><div class="management-post"><div class="table100-head" align="center"><h5 style="color: #757575">Đã có lỗi trong quá trình xử lý!</h5></div></div></div></div>')}})},changeStatus:function(t){var e=$(t).attr("data-title"),n=$(t).attr("data-id"),a=$(t).attr("data-status"),i=$(t).attr("data-type");return bootbox.confirm({title:"Thông báo",message:"<p>Bạn chắc chắn muốn "+e+" tin đăng này?</p>",className:"popup-dialog",buttons:{cancel:{className:"btn-bootbox btn-no",label:"Không"},confirm:{className:"btn-bootbox btn-yes",label:"Đồng ý"}},callback:function(t){t&&($(".load").show(),$.ajax({type:"post",url:"/user/ajax/change-status",data:{id:n,status:a},success:function(t){try{$(".load").hide(),bootbox.dialog({title:"Thông báo",message:"<p>Tin đăng đã được "+e+" thành công!</p>",className:"popup-dialog",buttons:{ok:{label:"Đã hiểu",className:"btn-bootbox btn-confirm",callback:function(){Raovat.userPosts.loadListPost(i)}}}})}catch(t){console.log(t)}}}))}}),!1},dangTin:function(){$("body").on("click","#btn-page-post, #btn-page-post-banner",(function(t){if(t.preventDefault(),$.isEmptyObject(myvne_users.profile)||void 0===myvne_users.profile.user_id)Raovat.user.myvne_login();else{var e="/dang-tin.html?";e+=$(this).data("city")?"city="+$(this).data("city")+"&":"",e+=$(this).data("district")?"district="+$(this).data("district")+"&":"",e+=$(this).data("ward")?"ward="+$(this).data("ward")+"&":"",void 0!==$(this).data("slug")&&(e+="slug="+$(this).data("slug")),void 0!==$(this).data("itm-source")&&(e+=$(this).data("itm-source")),window.location.href=e}}))}},posts_static:{init:function(){$(".content-page-static").lightGallery({selector:".lightGallery",thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,autoplayControls:!1,download:!1,share:!1})}},posts:{init:function(){var t=new Swiper(".gallery-thumbs",{direction:"vertical",spaceBetween:4,slidesPerView:4,watchOverflow:!0,freeMode:!0,loop:!1,watchSlidesVisibility:!0,watchSlidesProgress:!0,navigation:{nextEl:".swiper-btn-next-thumbs",prevEl:".swiper-btn-prev-thumbs"}});new Swiper(".gallery-top",{direction:"vertical",watchOverflow:!0,spaceBetween:5,loop:!1,navigation:{nextEl:".swiper-btn-next-gallery-top",prevEl:".swiper-btn-prev-gallery-top"},thumbs:{swiper:t}});$("#images_pro").lightGallery({selector:".single-gl-item",thumbnail:!0,animateThumb:!1,showThumbByDefault:!0,autoplayControls:!1,download:!1,youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0},share:!1});new Swiper("#slide_preview_detail_mb",{loop:!1,lazy:!0,pagination:{el:".swiper-pagination-slide-detail",clickable:!0},navigation:{nextEl:".swiper-btn-control.swiper-button-next-slide-detail",prevEl:".swiper-btn-control.swiper-button-prev-slide-detail"}});$(".single-preview-detail-mb").lightGallery({selector:".single-gl-item",thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,autoplayControls:!1,download:!1,fullScreen:!1,youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0},share:!1});var e=$("<input>"),n=$(location).attr("href"),a=encodeURI(document.title),i=document.getElementById("copyClipboard"),o=document.getElementById("copyClipboard2");function s(){$("body").append(e),e.val(n).select(),document.execCommand("copy"),e.remove(),$(this).tooltip("hide").attr("data-original-title","Đã sao chép liên kết").attr("title","Đã sao chép liên kết").tooltip("show")}function r(){$(this).attr("title","Sao chép liên kết").attr("data-original-title","Sao chép liên kết")}function r(){$(this).attr("title","Sao chép liên kết").attr("data-original-title","Sao chép liên kết")}null!==i&&(i.addEventListener("click",s),i.addEventListener("mouseout",r)),null!==o&&(o.addEventListener("click",s),o.addEventListener("mouseout",r)),$("#shareFacebook").attr("href","https://www.facebook.com/sharer.php?u="+n),$("#shareTwitter").attr("href","https://twitter.com/intent/tweet?url="+n+"&amp;text="+a),$("#shareFacebook").attr("href","https://www.facebook.com/sharer.php?u="+n),$("#shareTwitter").attr("href","https://twitter.com/intent/tweet?url="+n+"&amp;text="+a)},updateView:function(t){$.ajax({type:"POST",url:"/posts/ajax/update-view",data:{id:t},success:function(t){}})},viewContent:function(){$(".content-detail").height()>500?($(".content-detail.js-content").css("max-height",500),$(".content-detail.js-content").addClass("btn-show-more-true")):$(".group-btn-click").css("display","none"),$(".js-content .btn-show-more").click((function(){$(".js-content").addClass("active"),$(".content-detail.js-content").css("max-height","none")})),$(".js-content .btn-hide-more").click((function(){$(".js-content").removeClass("active"),$(".content-detail.js-content").css("max-height",500),$("html,body").animate({scrollTop:$("#ChiTiet").offset().top})}))}},userNotify:function(){$.ajax({type:"post",url:"/home/api/listNotify.html"}).done((function(t){$("#notify-title .notify-number").html(t.count),$("#notify-title .notify-number").show(),0===t.count&&$("#notify-title .notify-number").hide(),$("#notify-title").attr("title","Bạn có "+t.count+" thông báo mới"),$.each(t.notify,(function(t,e){var n="",a="Tin đăng của bạn",i="javascript:void()";switch(e.status){case 1:n="chờ duyệt.";break;case 2:n=void 0===e.reason||null==e.reason?"bị từ chối duyệt.":"bị từ chối duyệt vì lý do: "+e.reason+". Vui lòng điều chỉnh lại!";break;case 3:n="đã được duyệt thành công.",i="/"+e.slug+"-"+e.post_id+".html";break;case 4:n="đã xóa.";break;case"success":n="đã được xác nhận chỉnh sửa.",a="Tin chỉnh sửa của bạn";break;case"cancel":a="Tin chỉnh sửa của bạn",n=void 0===e.reason||null==e.reason?"bị từ chối chỉnh sửa.":"bị từ chối chỉnh sửa vì lý do: "+e.reason+". Vui lòng điều chỉnh lại!";break;case"wallet":i="/user/wallet";break;case"reference_link":i=e.reference_link;break;case"refund":i="/user/wallet"}"wallet"==e.status||"reference_link"==e.status||"refund"==e.status?$(".list-notify").prepend('<li><a data-id="'+e._id+'" href="'+i+'" title="">'+e.content+"</a></li>"):$(".list-notify").prepend('<li><a data-id="'+e._id+'" href="'+i+'" title="">'+a+' <span\nclass="highlight">"'+e.content+'"</span> '+n+"</a></li>")}))})),$(".user-logged .user-notify").on("click",(function(){$.ajax({type:"get",url:"home/api/updateNotify.html"}).done((function(t){$("#notify-title .notify-number").hide()}))}))},cookie:{setCookie:function(t,e,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var i="expires="+a.toUTCString();document.cookie=t+"="+e+";"+i+";path=/"},getCookie:function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}},keyword:{init:function(){$("body").on("click",".item-keyword>a",(function(){var t=$(this).data("id");$.ajax({url:base_url+"/home/api/updateClickKeyword.html",type:"POST",dataType:"json",data:{keywordId:t}})}))}}};Raovat.userFavorite={init:function(){this._onload(),this._favoriteCheck()},_onload:function(){$(document).on("click",".btn-favorite",(function(){if(void 0!==Raovat.user_id&&Raovat.user_id){var t=$(this);if(t.hasClass("active")){var e=bootbox.dialog({message:'<div class="box">                                        <p><strong>Tin đã được lưu.</strong></p>                                     </div>',className:"popup-dialog",buttons:{cancel:{label:"Đóng",className:"btn-bootbox ebox-bg-secondary"}},backdrop:!0,onEscape:!0});return window.setTimeout((function(){e.modal("hide")}),3e3),!1}var n=t.data("pid"),a=Raovat.user_id;n&&$.ajax({url:"/user/ajax/favorite",type:"post",data:{postsId:n,userId:a},dataType:"json",success:function(e){t.attr("id","my-heart-product"),t.addClass("active"),t.removeAttr("id");var n=bootbox.dialog({message:'<div class="box">                                                <p><strong>'+e.msg+"</strong></p>                                             </div>",className:"popup-dialog",buttons:{cancel:{label:"Đóng",className:"btn-bootbox ebox-bg-secondary"}},backdrop:!0,onEscape:!0});window.setTimeout((function(){n.modal("hide")}),3e3)}})}else $(".myvne_login").click()})),$("body").on("click",".btn-dislike",(function(){var t=$(this);if(void 0!==Raovat.user_id&&Raovat.user_id){var e=Raovat.user_id,n=t.data("pid");confirm("Bạn có chắc chắn muốn bỏ thích sản phẩm này không?")&&$.ajax({url:"/user/ajax/dislike-posts",type:"post",data:{postsId:n,userId:e},dataType:"json",success:function(e){t.closest(".item-post").remove()}})}else $(".myvne_login").click()}))},_favoriteCheck:function(){var t=Raovat.cookies("myvne_user_id");void 0!==t&&t&&t>0&&Raovat.postsArray.length>0&&$.ajax({url:"/user/ajax/check-favorite",type:"post",data:{postsArray:JSON.stringify(Raovat.postsArray),userId:t},dataType:"json",success:function(t){t.code&&void 0!==t.data&&$.each(JSON.parse(t.data),(function(t,e){$("#btn-favorite-"+e).addClass("active")}))}})}},$(document).ready((function(){Raovat.userFavorite.init()}));
